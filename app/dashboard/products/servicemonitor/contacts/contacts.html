<div class='contacts'>
  <h3>项目联系人</h3>
  <md-button class="md-icon-button" aria-label='添加联系人' title='添加联系人' ng-click="vm.showAddContactDialog($event)">
    <ng-md-icon icon="person_add" size="25"></ng-md-icon>
  </md-button>
</div>
<div>
  <table class="table margin-top-30" ts-wrapper>
    <thead>
      <tr>
        <th ts-criteria="name|lowercase" ts-default='descending'>姓名</th>
        <th ts-criteria="phone_number|parseInt">电话</th>
        <th ts-criteria="email|lowercase">邮箱</th>
        <th>编辑</th>
        <th>删除</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="x in vm.contacts" ts-repeat>
        <td>{{ x.name }}</td>
        <td>{{ x.phone_number }}</td>
        <td>{{ x.email }}</td>
        <td>
          <md-button class="md-icon-button" aria-label="编辑" title="编辑" ng-click="vm.showEditContactDialog($event, x)">
            <ng-md-icon icon="mode_edit" size="25"></ng-md-icon>
          </md-button>
        </td>
        <td>
          <md-button class="md-icon-button" aria-label="删除" title="删除" ng-click="vm.showDeleteContactDialog($event, x)">
            <ng-md-icon icon="delete" size="25"></ng-md-icon>
          </md-button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- add ontacts template -->
<script type="text/ng-template" id="addProjectContactModal.html">
  <md-dialog aria-label="vm.title" class='alert-dialog'>
    <form name='addContactForm' class='alert-dialog-form'>
      <md-dialog-content class="sticky-container">
        <h3>{{vm.title}}</h3>
        <md-input-container>
          <label>姓名</label>
          <input required name="name" ng-model="vm.name">
          <div ng-messages="addContactForm.name.$error">
            <div ng-message="required"></div>
          </div>
        </md-input-container>

        <md-input-container>
          <label>电话</label>
          <input required name="phone" ng-model="vm.phone">
          <div ng-messages="addContactForm.phone.$error">
            <div ng-message="required"></div>
          </div>
        </md-input-container>

        <md-input-container>
          <label>邮箱</label>
          <input required name="email" ng-model="vm.email">
          <div ng-messages="addContactForm.email.$error">
            <div ng-message="required"></div>
          </div>
        </md-input-container>
      </md-dialog-content>
      <h4 class='error-tip'>{{ vm.errortip }}</h4>
      <div class='md-actions' layout="row">
        <md-button ng-click="vm.cancel($event)" class="md-default-theme">
          取消
        </md-button>
        <md-button ng-click="vm.ok()" class="md-primary">
          确定
        </md-button>
      </div>
    </form>
  </md-dialog>
</script>

<script type="text/ng-template" id="deleteContactModal.html">
  <md-dialog aria-label="删除联系人" class='alert-dialog'>
    <form name='delContactModal' class='alert-dialog-form'>
      <md-dialog-content class="sticky-container">
        <h3>删除联系人</h3>
        <label>确定删除联系人：{{ vm.name }}</label>
      </md-dialog-content>
      <h4 class='error-tip'>{{ vm.errortip }}</h4>
      <div class="md-actions" layout="row">
        <md-button ng-click="vm.cancel()" class="md-default-theme">
          取消
        </md-button>
        <md-button ng-click="vm.ok()" class="md-primary">
          确定
        </md-button>
      </div>
    </form>
  </md-dialog>
</script>
